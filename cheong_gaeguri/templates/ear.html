
<!DOCTYPE html>
<html>
  <head>
    
    <meta charset="utf-8">
    <title>for_ear</title>
    <link rel="stylesheet" href="{{url_for('static',filename = 'css/style.css')}}">
    <!-- <script src = "{{url_for('static',filename = 'js/cam.js')}}"></script> -->
    <script src="{{url_for('static',filename = 'js/jquery-3.5.1.min.js')}}"></script>
    <!-- <script src="{{url_for('static',filename = 'js/brython.js')}}"></script>
    <script src="{{url_for('static',filename = 'js/brython_stdlib.js')}}"></script> -->
    <script type = 'text/python3' src = "{{url_for('static', filename = 'py/text_gen.py')}}"></script>

    <style>
    .wrapper{
        display: flex;
        width : auto;
        height: auto;
        box-shadow: 0px 0px 5px black;
    }
     .object{
         margin: 2%;
         width: 300px;
         height: 400px;
         box-shadow: 0px 0px 5px gray;
     }

    </style>
     <script>
      function video_play(event){

         
         var input = document.getElementById("ear");
         
         var fReader = new FileReader();
         fReader.readAsDataURL(input.files[0]);
         fReader.onloadend = function(event){
            var player = document.getElementById("H_sign");
            player.src = event.target.result;
      
            
            
}
      


        //  if (h_sign_video.getAttribute('src')!=""){
        //      h_sign_video.pause()
        //  }           
        //  if (h_sign_video.paused){
        //      h_sign_video.play()
        //  }
      }
      function extract_path(event){
        var input = document.getElementById("ear");
        var i;
        var tmp = "";
        for(i = 0; i < input.value.length; i++){

          tmp += input.value[i]
          if(tmp == "C:\\fakepath\\"){
            tmp = ""
          }
          else{
            if(input.value[i+1] == '.'){
              break
            }
          }
        }
        $.post({
            type:"POST",
            url : '/ear',
            data : tmp,
            success:function(response){
                console.log('{{ res }}')
            },
            
        
        });
      }
      
      
     
  </script>
  </head>
  <body>
      <div class = "wrapper">

          <div class = "object">

	        <!--카메라 연동 opencv용 <video autoplay="true" id="videoElement" width="275" height="360" style="object-fit: fill;"></video>  -->
          <video

          src = ""
          id="H_sign"
          width="300" height="360"
          style="object-fit: fill;"
          autoplay
          onended="extract_path()"
          ></video>
        
          <input type="file" id = "ear" onchange="video_play(event)">
          </div>

          <!-- <div class="object">
            캐릭터
          </div> -->
        <form method="POST" action="/ear" >
        <div class="object" style="margin-top: 10px; height: 400px; box-shadow: 0px 0px 0px;">
        <textarea name = "ear_me" style= "margin: 2%; width: 275px; height: 360px; margin-left: 3%; box-shadow: 0px 0px 5px gray; resize: none;">{{res}}</textarea>
        <input type="submit" value="번역" style="margin-left: 10px;">
        </form> 
        </div>
      </div>
   
  </body>
</html>
